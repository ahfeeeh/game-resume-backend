{"version":3,"sources":["webpack:///./src/views/SteamGames.vue","webpack:///./src/components/SteamGamesTable.vue","webpack:///./src/components/SteamGamesTable.vue?12cc","webpack:///./src/views/SteamGames.vue?2545"],"names":["class","style","isLoading","type","href","env","target","id","role","aria-hidden","scope","placeholder","aria-label","aria-describedby","searchQuery","resultQuery","game","idx","key","app_id","title","finished","disabled","markAsPlaying","getSelectedGame","toggleModalFinished","has_dlc","toggleModalDLC","modalActive","modalActiveFinished","modal-header","modal-content","modal-footer","finishItem","getCurrentIdx","modalActiveDLC","dlcs","dlc","markDlcAsFinished","name","setup","toast","store","value","console","log","commit","context","query","then","data","api_payload","a","post","resp","success","catch","err","error","computed","this","getGames","filter","item","toLowerCase","split","every","v","includes","created","mounted","getItems","methods","dispatch","payload","table","toggleModal","components","Modal","__exports__","SteamGamesTable","Loading","setTimeout","render"],"mappings":"4IACOA,MAAM,e,SAEJA,MAAM,iBAAmCC,MAAA,uB,GACvCD,MAAM,uB,EACT,eAAuB,OAAlBA,MAAM,OAAK,S,EAChB,eAAuB,OAAlBA,MAAM,OAAK,S,GACXA,MAAM,O,4BACmF,O,4BACiB,O,cAI5GA,MAAM,S,EACT,eAA0B,UAAtB,qBAAiB,G,GAChBA,MAAM,oB,oHAdjB,eAmBM,MAnBN,EAmBM,CAlBW,EAAAE,W,iBAAf,eAAoC,Y,sBACD,EAAAA,U,wCAAnC,eAgBM,MAhBN,EAgBM,CAfJ,eAQM,MARN,EAQM,CAPJ,EACA,EACA,eAIM,MAJN,EAIM,CAHJ,eAA4F,KAAzFC,KAAK,SAASH,MAAM,0BAA2BI,KAAI,UAAK,EAAAC,IAAL,qBAA4B,SAAM,K,EACxF,eAA6G,KAA1GF,KAAK,SAASH,MAAM,4BAA6BI,KAAI,UAAK,EAAAC,IAAL,mBAA2BC,OAAO,UAAS,SAAM,K,EACzG,eAA2F,KAAxFH,KAAK,SAASH,MAAM,0BAA2BI,KAAI,UAAK,EAAAC,IAAL,oBAA2B,SAAM,SAG3F,eAKM,MALN,EAKM,CAJJ,EACA,eAEM,MAFN,EAEM,CADJ,eAAmB,Y,MCd3B,eAAM,mB,EACN,eAAM,mB,EACN,eAAM,mB,GACDL,MAAM,oB,EACT,eAEM,OAFDA,MAAM,uBAAqB,CAC9B,eAA8D,QAAxDA,MAAM,mBAAmBO,GAAG,gBAAe,Y,MAK9CP,MAAM,mC,EACX,eAQQ,cAPN,eAMK,WALH,eAAW,UAAP,MACJ,eAAc,UAAV,SACJ,eAAc,UAAV,SACJ,eAAmB,UAAf,cACJ,eAAgB,UAAZ,e,gCAYGA,MAAM,yBAAyBQ,KAAK,S,gBAC6E,eAA2B,KAAxBR,MAAM,eAAa,S,iBAAK,oB,GAA3B,E,oBAAoD,O,gBAC5D,eAA4B,KAAzBA,MAAM,gBAAc,S,iBAAK,qB,GAA5B,E,oBAAsD,O,2BACrB,eAAkC,KAA/BA,MAAM,sBAAoB,S,iBAAK,Q,GAAlC,E,oBAA+C,O,aACnH,eAA+C,KAA5CA,MAAM,eAAeS,cAAY,Q,0BAAW,sB,GAA/C,E,oBAOnD,2B,EAG5B,eAA6D,UAAzD,wDAAoD,G,iBAc5B,S,GAGrBT,MAAM,qB,EACX,eAQQ,cAPN,eAMK,WALH,eAAuB,MAAnBU,MAAM,OAAM,MAChB,eAA0B,MAAtBA,MAAM,OAAM,SAChB,eAA0B,MAAtBA,MAAM,OAAM,SAChB,eAA6B,MAAzBA,MAAM,OAAM,YAChB,eAA4B,MAAxBA,MAAM,OAAM,e,MAKZA,MAAM,O,4CAYN,eAA4B,KAAzBV,MAAM,gBAAc,S,kBAAK,sB,IAA5B,G,sHApFd,EACA,EACA,EACA,eAKM,MALN,EAKM,CAJJ,E,eAGA,eAAgJ,SAAzIG,KAAK,OAAOH,MAAM,eAAeW,YAAY,kBAAkBC,aAAW,SAASC,mBAAiB,e,qDAAwB,EAAAC,YAAW,K,mBAAX,EAAAA,iBAGrI,eA4BQ,QA5BR,EA4BQ,CA3BN,EASA,eAiBQ,e,mBAhBN,eAeK,2BAfqB,EAAAC,aAAW,SAAzBC,EAAMC,G,wBAAlB,eAeK,MAfmCC,IAAKD,GAAG,CAC9C,eAAsB,yBAAfD,EAAKT,IAAE,GACd,eAA0B,yBAAnBS,EAAKG,QAAM,GAClB,eAAyB,yBAAlBH,EAAKI,OAAK,GACjB,eAEK,W,eADH,eAAkE,SAA3DjB,KAAK,W,yCAAoBa,EAAKK,SAAQ,GAAGC,UAAU,G,mBAA1BN,EAAKK,cAEvC,eAOK,WANH,eAKM,MALN,EAKM,CAJJ,eAAwK,UAAhKlB,KAAK,SAASH,MAAM,wBAAyB,QAAK,mBAAE,EAAAuB,cAAcP,EAAKG,QAAUH,EAAKT,GAAI,EAAAiB,mB,SAClG,eAAkK,UAA1JrB,KAAK,SAASH,MAAM,yBAA0B,QAAK,mBAAE,EAAAyB,oBAAoBT,EAAKG,QAAUH,EAAKT,M,SACrG,eAA4L,UAAnLe,UAAWN,EAAKU,QAASvB,KAAK,SAASH,MAAM,sBAAsBC,MAAA,gBAAsB,QAAK,mBAAE,EAAA0B,eAAeX,EAAKG,OAAM,K,SACnI,eAA8I,KAA3InB,MAAM,2BAA4BI,KAAI,sBAAiBY,EAAKG,S,0BAMzE,eAgBQ,GAhBA,QAAO,EAAAM,oBAAsBG,YAAa,EAAAC,qB,CAC/BC,eAAY,gBAAC,iBAAuB,C,MAEpCC,gBAAa,gBAC5B,iBAA6D,CAA7D,MAGeC,eAAY,gBAC3B,iBAMS,CANT,eAMS,UALP7B,KAAK,SACLH,MAAM,kBACL,QAAK,+BAAE,EAAAiC,WAAW,EAAAC,cAAe,EAAAT,wBACnC,0B,kCAKL,eAqCQ,GArCA,QAAK,+BAAE,EAAAE,eAAc,QAAaC,YAAa,EAAAO,gB,CACpCL,eAAY,gBAAC,iBAAK,C,MAElBC,gBAAa,gBAC5B,iBA6BQ,CA7BR,eA6BQ,QA7BR,EA6BQ,CA5BN,EASA,eAkBQ,e,mBAjBN,eAgBK,2BAhBa,EAAAK,MAAI,SAAXC,G,wBAAX,eAgBK,MAhBoBnB,IAAKmB,EAAI9B,I,CAChC,eAAiC,KAAjC,EAAiC,eAAd8B,EAAI9B,IAAE,GACzB,eAAyB,yBAAlB8B,EAAIlB,QAAM,GACjB,eAAwB,yBAAjBkB,EAAIjB,OAAK,GAChB,eAEK,W,eADH,eAAiE,SAA1DjB,KAAK,W,yCAAoBkC,EAAIhB,SAAQ,GAAGC,UAAU,G,mBAAzBe,EAAIhB,cAEtC,eAQK,WAPH,eAMS,UALPlB,KAAK,SACLH,MAAM,yBACL,QAAK,mBAAE,EAAAsC,kBAAkBD,EAAI9B,GAAI8B,EAAIlB,QAASkB,EAAIhB,SAAQ,K,8BAUtDW,eAAY,gBAA7B,iBAA0C,M,wMAc/B,IACbO,KAAM,kBACNC,MAFa,WAGX,IAAMC,EAAQ,kBACRC,EAAQ,kBAERb,EAAsB,gBAAI,GAC1BM,EAAiB,gBAAI,GAErBV,EAAsB,SAACR,GAC3BY,EAAoBc,OAASd,EAAoBc,MAC7Cd,EAAoBc,QACtBC,QAAQC,IAAI,2BAA4B5B,GACxCyB,EAAMI,OAAO,cAAe7B,KAI1BU,EAAiB,SAACpB,EAAIwC,GAE1B,GADAZ,EAAeQ,OAASR,EAAeQ,MACnCR,EAAeQ,MAAO,CACxBC,QAAQC,IAAI,mBAAoBtC,GAEhC,IAAMyC,EAAQ,kBAAJ,kNAEkBzC,GAS5B,sBAAQ,GAAD,OAAI,6CAAJ,YAAkDyC,GAAOC,MAAK,SAACC,GACpEH,EAAQX,KAAOc,EAAKd,aAGtBW,EAAQX,KAAO,IAIbE,EAAoB,SAACrB,EAAKV,EAAIc,EAAU0B,GAC5CH,QAAQC,IAAI,6BAA8B5B,GAC1C2B,QAAQC,IAAI,MAAOtC,GACnBqC,QAAQC,IAAI,aAAcxB,GAC1B,IAAM8B,EAAc,CAAEhC,OAAQZ,EAAIA,GAAIU,EAAKI,YAC3C,GAAA+B,EACGC,KADH,UACW,6CADX,iBAC8DF,GAC3DF,MAAK,SAACK,GACLP,EAAQX,KAAOkB,EAAKJ,KAAKd,KACzBK,EAAMc,QAAN,gDAEDC,OAAM,SAACC,GACNb,QAAQc,MAAMD,GACdhB,EAAMiB,MAAM,oCAIlB,MAAO,CAAEjB,QAAOZ,sBAAqBM,iBAAgBV,sBAAqBE,iBAAgBW,oBAAmBI,UAE/GQ,KA5Da,WA6DX,MAAO,CACLpC,YAAa,KACbsB,KAAM,KAGVuB,SAAU,iBAAC5C,YAAD,WAAe,WACvB,OAAG6C,KAAK9C,YACC8C,KAAKC,SAASC,QAAO,SAACC,GAC3B,OAAO,EAAKjD,YAAYkD,cAAcC,MAAM,KAAKC,OAAM,SAAAC,GAAA,OAAKJ,EAAK3C,MAAM4C,cAAcI,SAASD,SAGvFP,KAAKC,WAEZ,gBAAW,CAAC,WAAY,kBAAmB,mBACjDQ,QA3Ea,aA4EbC,QA5Ea,WA6EXV,KAAKW,YAEPC,QAAS,CACPD,SADO,WAELX,KAAKlB,MAAM+B,SAAS,WAAY,CAC9BC,QAAS,CAAEC,MAAO,SAClBlC,MAAOmB,KAAKnB,SAGhBR,WAPO,SAOIhB,EAAK2D,GACdhB,KAAKlB,MAAM+B,SAAS,aAAc,CAChCC,QAAS,CAAEzD,IAAIA,EAAI,GAAI0D,MAAO,SAC9BlC,MAAOmB,KAAKnB,QAEdmC,KAEFrD,cAdO,SAcON,EAAKyD,GACjBA,EAAQC,MAAQ,UAChBD,EAAQzD,IAAMA,EACd2C,KAAKlB,MAAM+B,SAAS,gBAAiB,CAAEC,UAASjC,MAAOmB,KAAKnB,UAGhEoC,WAAY,CACVC,SAAA,O,wBC3MJ,MAAMC,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS,MAErD,U,aFqBA,IACbxC,KAAM,aACNsC,WAAY,CACVG,mBACAC,WAAA,MAEFX,QANa,WAMH,WACRY,YAAW,WACT,EAAKhF,WAAY,IAChB,MAELgD,KAXa,WAYX,MAAO,CACL7C,IAAK,6CACLH,WAAW,KGrCjB,MAAM,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAASiF,KAErD","file":"js/chunk-2d0e9d44.bf0f2ce9.js","sourcesContent":["<template>\n  <div class=\"all-content\">\n    <Loading v-if=\"isLoading\"></Loading>\n    <div class=\"container py-4\" v-if=\"!isLoading\" style=\"margin-top: 50px\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\">\n          <a type=\"button\" class=\"btn btn-outline-primary\" :href=\"`${env}/csv?table=Steam`\">to CSV</a> &nbsp;\n          <a type=\"button\" class=\"btn btn-outline-secondary\" :href=\"`${env}/pdf?from=steam`\" target=\"_blank\">to PDF</a> &nbsp;\n          <a type=\"button\" class=\"btn btn-outline-success\" :href=\"`${env}/xls?from=steam`\">to XLS</a>\n        </div>\n      </div>\n      <div class=\"about\">\n        <h1>Steam Games Table</h1>\n        <div class=\"table-responsive\">\n          <SteamGamesTable />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport SteamGamesTable from \"@/components/SteamGamesTable.vue\";\nimport Loading from \"@/components/Loading.vue\";\n\nexport default {\n  name: \"SteamGames\",\n  components: {\n    SteamGamesTable,\n    Loading,\n  },\n  mounted() {\n    setTimeout(() => {\n      this.isLoading = false;\n    }, 2000);\n  },\n  data() {\n    return {\n      env: process.env.VUE_APP_BACKEND_SERVER,\n      isLoading: true,\n    };\n  },\n};\n</script>\n","<template>\n\n  <br />\n  <br />\n  <br />\n  <div class=\"input-group mb-3\">\n    <div class=\"input-group-prepend\">\n      <span class=\"input-group-text\" id=\"basic-addon1\">Search</span>\n    </div>\n    <input type=\"text\" class=\"form-control\" placeholder=\"Input Game Name\" aria-label=\"Search\" aria-describedby=\"basic-addon1\" v-model=\"searchQuery\">\n  </div>\n\n  <table class=\"table table-striped table-hover\">\n    <thead>\n      <tr>\n        <th>Id</th>\n        <th>AppId</th>\n        <th>Title</th>\n        <th>Finished ?</th>\n        <th>Actions</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(game, idx) in resultQuery\" :key=\"idx\">\n        <td>{{ game.id }}</td>\n        <td>{{ game.app_id }}</td>\n        <td>{{ game.title }}</td>\n        <td>\n          <input type=\"checkbox\" v-model=\"game.finished\" :disabled=\"true\" />\n        </td>\n        <td>\n          <div class=\"btn-group btn-group-sm\" role=\"group\">\n            <button type=\"button\" class=\"btn btn-danger btn-sm\" @click=\"markAsPlaying(game.app_id || game.id, getSelectedGame)\"><i class=\"fas fa-play\"></i> Mark as Playing</button> &nbsp;\n            <button type=\"button\" class=\"btn btn-success btn-sm\" @click=\"toggleModalFinished(game.app_id || game.id)\" > <i class=\"fas fa-check\"></i> Mark as Finished</button> &nbsp;\n            <button :disabled=\"!game.has_dlc\" type=\"button\" class=\"btn btn-info btn-sm\" style=\"color: white\" @click=\"toggleModalDLC(game.app_id, this)\"> <i class=\"fa fa-puzzle-piece\"></i> DLC</button> &nbsp;\n            <a class=\"btn btn-secondary btn-sm\" :href=\"`steam://run/${game.app_id}`\"><i class=\"fa fa-wrench\" aria-hidden=\"true\"></i> Install/Play Game</a>            \n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <Modal @close=\"toggleModalFinished\" :modalActive=\"modalActiveFinished\">\n    <template v-slot:modal-header> Mark Game as Finished </template>\n\n    <template v-slot:modal-content>\n      <h2>Are you sure you want to mark this game as finished?</h2>\n    </template>\n\n    <template v-slot:modal-footer>\n      <button\n        type=\"button\"\n        class=\"btn btn-primary\"\n        @click=\"finishItem(getCurrentIdx, toggleModalFinished)\"\n      >\n        Mark as Finished\n      </button>\n    </template>\n  </Modal>\n  <Modal @close=\"toggleModalDLC('', this)\" :modalActive=\"modalActiveDLC\">\n    <template v-slot:modal-header> DLC </template>\n\n    <template v-slot:modal-content>\n      <table class=\"table table-hover\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Id</th>\n            <th scope=\"col\">AppId</th>\n            <th scope=\"col\">Title</th>\n            <th scope=\"col\">Finished</th>\n            <th scope=\"col\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"dlc in dlcs\" :key=\"dlc.id\">\n            <th scope=\"row\">{{ dlc.id }}</th>\n            <td>{{ dlc.app_id }}</td>\n            <td>{{ dlc.title }}</td>\n            <td>\n              <input type=\"checkbox\" v-model=\"dlc.finished\" :disabled=\"true\" />\n            </td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-success btn-sm\"\n                @click=\"markDlcAsFinished(dlc.id, dlc.app_id, !dlc.finished, this)\"\n              >\n                <i class=\"fas fa-check\"></i> Mark as Finished\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </template>\n\n    <template v-slot:modal-footer> </template>\n  </Modal>\n</template>\n\n<script>\nimport { useToast } from \"vue-toastification\";\nimport Modal from \"@/components/Modal.vue\";\n\nimport { useStore } from \"vuex\";\nimport { mapGetters } from \"vuex\";\nimport { ref } from \"vue\";\nimport { request, gql } from \"graphql-request\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"SteamGamesTable\",\n  setup() {\n    const toast = useToast();\n    const store = useStore();\n\n    const modalActiveFinished = ref(false);\n    const modalActiveDLC = ref(false);\n\n    const toggleModalFinished = (idx) => {\n      modalActiveFinished.value = !modalActiveFinished.value;\n      if (modalActiveFinished.value) {\n        console.log(\"are you sure Finished ? \", idx);\n        store.commit(\"SELECT_ITEM\", idx);\n      }\n    };\n\n    const toggleModalDLC = (id, context) => {\n      modalActiveDLC.value = !modalActiveDLC.value;\n      if (modalActiveDLC.value) {\n        console.log(\"show DLCs for ? \", id);\n\n        const query = gql`\n          {\n            dlcs: getDLC(app_id: \"${id}\") {\n              id\n              app_id\n              title\n              finished\n            }\n          }\n        `;\n\n        request(`${process.env.VUE_APP_BACKEND_SERVER}/graphql`, query).then((data) => {\n          context.dlcs = data.dlcs;\n        });\n      } else {\n        context.dlcs = [];\n      }\n    };\n\n    const markDlcAsFinished = (idx, id, finished, context) => {\n      console.log(\"Mark dlc as finished idx: \", idx);\n      console.log(\"id:\", id);\n      console.log(\"finished: \", finished);\n      const api_payload = { app_id: id, id: idx, finished };      \n      axios\n        .post(`${process.env.VUE_APP_BACKEND_SERVER}/dlc_finished`, api_payload)\n        .then((resp) => {          \n          context.dlcs = resp.data.dlcs;\n          toast.success(`Success on Mark as Finished from Database`);\n        })\n        .catch((err) => {\n          console.error(err);\n          toast.error(\"Error on Save Changes on API\");\n        });\n    };\n\n    return { toast, modalActiveFinished, modalActiveDLC, toggleModalFinished, toggleModalDLC, markDlcAsFinished, store };\n  },\n  data() {\n    return {\n      searchQuery: null,\n      dlcs: []\n    };\n  },\n  computed: {resultQuery() {\n    if(this.searchQuery){\n      return this.getGames.filter((item)=>{        \n        return this.searchQuery.toLowerCase().split(' ').every(v => item.title.toLowerCase().includes(v))\n      })\n      }else{\n        return this.getGames;\n      }\n  }, ...mapGetters([\"getGames\", \"getSelectedGame\", \"getCurrentIdx\"])}, \n  created() {},\n  mounted() {\n    this.getItems();\n  },\n  methods: {\n    getItems() {\n      this.store.dispatch(\"getGames\", {\n        payload: { table: \"steam\" },\n        toast: this.toast,\n      });\n    },\n    finishItem(idx, toggleModal) {\n      this.store.dispatch(\"finishGame\", {\n        payload: { idx:idx[0], table: \"steam\" },\n        toast: this.toast,\n      });\n      toggleModal();\n    },\n    markAsPlaying(idx, payload) {           \n      payload.table = 'playing'\n      payload.idx = idx      \n      this.store.dispatch('markAsPlaying', { payload, toast: this.toast })  \n    }\n  },\n  components: {\n    Modal,\n  },\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./SteamGamesTable.vue?vue&type=template&id=228d6782\"\nimport script from \"./SteamGamesTable.vue?vue&type=script&lang=js\"\nexport * from \"./SteamGamesTable.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/felipe/DEV/game-resume-frontend/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SteamGames.vue?vue&type=template&id=57cd560f\"\nimport script from \"./SteamGames.vue?vue&type=script&lang=js\"\nexport * from \"./SteamGames.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/felipe/DEV/game-resume-frontend/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}